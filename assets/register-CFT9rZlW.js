import{_ as k,H as C,g as q,J as S,K as M,L as i,M as P,N as u,O as U,q as T,c as $,v as a,s as t,G as B,o as F,V as x,x as n,B as A,P as E,D as V,Q as N,R,S as j,t as s,T as d,U as z,C as w,W as O}from"./index-CoNJkl2v.js";import{v as _}from"./index-FyK61hbi.js";import{V as D}from"./VCheckbox-DT2x89zo.js";import"./VCheckboxBtn-C3CefVXm.js";const G={class:"register-wrapper"},H={__name:"register",setup(I){const b=C(),y=T(),m=q(!1),c=S({validationSchema:M({account:i().required("帳號必填").min(4,"帳號至少4個字").max(20,"帳號最多20個字").test("isAlphanumeric","帳號只能包含英文字母和數字",r=>_.isAlphanumeric(r)),email:i().required("電子郵件必填").test("isEmail","請輸入有效的電子郵件地址",r=>_.isEmail(r)),password:i().required("密碼必填").min(4,"密碼至少4個字").max(20,"密碼最多20個字"),confirmPassword:i().required("確認密碼必填").oneOf([P("password")],"密碼和確認密碼必須相同")})}),f=u("account"),g=u("email"),p=u("password"),v=u("confirmPassword"),h=c.handleSubmit(async r=>{var e,l;try{await U.create({account:r.account,email:r.email,password:r.password}),b({text:"註冊成功！",snackbarProps:{color:"success"}}),y.push("/")}catch(o){console.error(o),b({text:((l=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:l.message)||"註冊失敗，請稍後再試！",snackbarProps:{color:"error"}})}});return(r,e)=>(F(),$("div",G,[a(B,{class:"fill-height pa-0 text-text",fluid:""},{default:t(()=>[a(x,{class:"fill-height","no-gutters":""},{default:t(()=>[a(n,{class:"d-none d-md-block left-image",cols:"6"}),a(n,{class:"right-col d-flex align-center justify-center pr-lg-16",cols:"12",md:"6"},{default:t(()=>[a(A,{class:"register-card pa-6 text-text",elevation:"5","max-width":"500",width:"100%"},{default:t(()=>[a(E,{class:"mb-4"},{default:t(()=>e[6]||(e[6]=[V("新用戶註冊")])),_:1,__:[6]}),a(N,{class:"flex-grow-1 overflow-y-auto"},{default:t(()=>[a(R,{disabled:s(c).isSubmitting.value,onSubmit:j(s(h),["prevent"])},{default:t(()=>[a(d,{modelValue:s(f).value.value,"onUpdate:modelValue":e[0]||(e[0]=l=>s(f).value.value=l),class:"my-3",counter:"",density:"comfortable","error-messages":s(f).errorMessage.value,label:"請輸入帳號",maxlength:"20",minlength:"4",required:"",variant:"outlined"},null,8,["modelValue","error-messages"]),a(d,{modelValue:s(g).value.value,"onUpdate:modelValue":e[1]||(e[1]=l=>s(g).value.value=l),class:"my-3",density:"comfortable","error-messages":s(g).errorMessage.value,label:"請輸入信箱",required:"",variant:"outlined"},null,8,["modelValue","error-messages"]),a(d,{modelValue:s(p).value.value,"onUpdate:modelValue":e[2]||(e[2]=l=>s(p).value.value=l),class:"my-3",counter:"",density:"comfortable","error-messages":s(p).errorMessage.value,label:"請輸入密碼",maxlength:"20",minlength:"4",required:"",type:"password",variant:"outlined"},null,8,["modelValue","error-messages"]),a(d,{modelValue:s(v).value.value,"onUpdate:modelValue":e[3]||(e[3]=l=>s(v).value.value=l),class:"my-3",counter:"",density:"comfortable","error-messages":s(v).errorMessage.value,label:"請再次確認密碼",maxlength:"20",minlength:"4",required:"",type:"password",variant:"outlined"},null,8,["modelValue","error-messages"]),a(D,{class:"mt-0 mx-2",density:"compact","hide-details":"",label:"訂閱電子報，看最新感受"}),a(z,{class:"d-flex justify-center mt-6"},{default:t(()=>[a(x,null,{default:t(()=>[a(n,{cols:"12"},{default:t(()=>[a(w,{block:"",color:"highlight1",loading:s(c).isSubmitting.value,size:"large",type:"submit",variant:"flat"},{default:t(()=>e[7]||(e[7]=[V(" 註冊 ")])),_:1,__:[7]},8,["loading"])]),_:1}),a(n,{cols:"12"},{default:t(()=>[a(w,{block:"",color:"highlight1",size:"large",variant:"tonal",onClick:e[4]||(e[4]=l=>m.value=!0)},{default:t(()=>e[8]||(e[8]=[V(" 已有帳號登入 ")])),_:1,__:[8]}),a(O,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=l=>m.value=l),persistent:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},W=k(H,[["__scopeId","data-v-dedba10e"]]);export{W as default};
