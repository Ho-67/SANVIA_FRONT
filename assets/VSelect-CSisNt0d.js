import{X as re,Y as Z,bK as be,w as $,a4 as ce,b as C,F as Q,a7 as q,b7 as Ve,k as xe,aA as K,aC as fe,g as W,h as L,bL as Ce,ay as we,aB as ue,bo as Re,l as ke,a1 as Se,bt as Ae,ak as De,a2 as Pe,bM as Fe,i as Be,bN as _e,v as x,bx as ne,f as Ee,n as Le,ar as Oe,an as Me,bO as He,Z as ve,ao as ze,az as Ke,bu as se,T as me,aE as Ne,bi as Ue,aF as qe,bP as $e,aG as je,bQ as he,bR as pe,bS as We,b8 as Xe,E as ge,bd as Ye,as as Ge,au as ye,bT as Qe,ag as Ze,bU as Je,a9 as et,D as tt}from"./index-Cy3rsmT0.js";import{a as lt}from"./VCheckboxBtn-UyNAd-A7.js";import{V as nt}from"./VChip-yjxMPXwl.js";const at=Z({renderless:Boolean,...Ve()},"VVirtualScrollItem"),ot=re()({name:"VVirtualScrollItem",inheritAttrs:!1,props:at(),emits:{"update:height":t=>!0},setup(t,d){let{attrs:n,emit:c,slots:o}=d;const{resizeRef:f,contentRect:v}=be(void 0,"border");$(()=>{var a;return(a=v.value)==null?void 0:a.height},a=>{a!=null&&c("update:height",a)}),ce(()=>{var a,r;return t.renderless?C(Q,null,[(a=o.default)==null?void 0:a.call(o,{itemRef:f})]):C("div",q({ref:f,class:["v-virtual-scroll__item",t.class],style:t.style},n),[(r=o.default)==null?void 0:r.call(o)])})}}),ut=-1,st=1,ie=100,it=Z({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function rt(t,d){const n=xe(),c=K(0);fe(()=>{c.value=parseFloat(t.itemHeight||0)});const o=K(0),f=K(Math.ceil((parseInt(t.height)||n.height.value)/(c.value||16))||1),v=K(0),a=K(0),r=W(),w=W();let s=0;const{resizeRef:O,contentRect:R}=be();fe(()=>{O.value=r.value});const k=L(()=>{var e;return r.value===document.documentElement?n.height.value:((e=R.value)==null?void 0:e.height)||parseInt(t.height)||0}),A=L(()=>!!(r.value&&w.value&&k.value&&c.value));let m=Array.from({length:d.value.length}),g=Array.from({length:d.value.length});const S=K(0);let y=-1;function M(e){return m[e]||c.value}const H=Ce(()=>{const e=performance.now();g[0]=0;const l=d.value.length;for(let i=1;i<=l-1;i++)g[i]=(g[i-1]||0)+M(i-1);S.value=Math.max(S.value,performance.now()-e)},S),h=$(A,e=>{e&&(h(),s=w.value.offsetTop,H.immediate(),E(),~y&&ke(()=>{Se&&window.requestAnimationFrame(()=>{le(y),y=-1})}))});we(()=>{H.clear()});function J(e,l){const i=m[e],b=c.value;c.value=b?Math.min(c.value,l):l,(i!==l||b!==c.value)&&(m[e]=l,H())}function F(e){return e=ue(e,0,d.value.length-1),g[e]||0}function _(e){return ct(g,e)}let j=0,N=0,X=0;$(k,(e,l)=>{l&&(E(),e<l&&requestAnimationFrame(()=>{N=0,E()}))});let Y=-1;function ee(){if(!r.value||!w.value)return;const e=r.value.scrollTop,l=performance.now();l-X>500?(N=Math.sign(e-j),s=w.value.offsetTop):N=e-j,j=e,X=l,window.clearTimeout(Y),Y=window.setTimeout(U,500),E()}function U(){!r.value||!w.value||(N=0,X=0,window.clearTimeout(Y),E())}let te=-1;function E(){cancelAnimationFrame(te),te=requestAnimationFrame(ae)}function ae(){if(!r.value||!k.value||!c.value)return;const e=j-s,l=Math.sign(N),i=Math.max(0,e-ie),b=ue(_(i),0,d.value.length),B=e+k.value+ie,u=ue(_(B)+1,b+1,d.value.length);if((l!==ut||b<o.value)&&(l!==st||u>f.value)){const T=F(o.value)-F(b),I=F(u)-F(f.value);Math.max(T,I)>ie?(o.value=b,f.value=u):(b<=0&&(o.value=b),u>=d.value.length&&(f.value=u))}v.value=F(o.value),a.value=F(d.value.length)-F(f.value)}function le(e){const l=F(e);!r.value||e&&!l?y=e:r.value.scrollTop=l}const oe=L(()=>d.value.slice(o.value,f.value).map((e,l)=>{const i=l+o.value;return{raw:e,index:i,key:Re(e,t.itemKey,i)}}));return $(d,()=>{m=Array.from({length:d.value.length}),g=Array.from({length:d.value.length}),H.immediate(),E()},{deep:1}),{calculateVisibleItems:E,containerRef:r,markerRef:w,computedItems:oe,paddingTop:v,paddingBottom:a,scrollToIndex:le,handleScroll:ee,handleScrollend:U,handleItemResize:J}}function ct(t,d){let n=t.length-1,c=0,o=0,f=null,v=-1;if(t[n]<d)return n;for(;c<=n;)if(o=c+n>>1,f=t[o],f>d)n=o-1;else if(f<d)v=o,c=o+1;else return f===d?o:c;return v}const dt=Z({items:{type:Array,default:()=>[]},renderless:Boolean,...it(),...Ve(),...Oe()},"VVirtualScroll"),ft=re()({name:"VVirtualScroll",props:dt(),setup(t,d){let{slots:n}=d;const c=Ae("VVirtualScroll"),{dimensionStyles:o}=De(t),{calculateVisibleItems:f,containerRef:v,markerRef:a,handleScroll:r,handleScrollend:w,handleItemResize:s,scrollToIndex:O,paddingTop:R,paddingBottom:k,computedItems:A}=rt(t,Pe(()=>t.items));return Fe(()=>t.renderless,()=>{function m(){var y,M;const S=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[S]("scroll",r,{passive:!0}),document[S]("scrollend",w)):((y=v.value)==null||y[S]("scroll",r,{passive:!0}),(M=v.value)==null||M[S]("scrollend",w))}Be(()=>{v.value=_e(c.vnode.el,!0),m(!0)}),we(m)}),ce(()=>{const m=A.value.map(g=>x(ot,{key:g.key,renderless:t.renderless,"onUpdate:height":S=>s(g.index,S)},{default:S=>{var y;return(y=n.default)==null?void 0:y.call(n,{item:g.raw,index:g.index,...S})}}));return t.renderless?C(Q,null,[C("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:ne(R.value)}},null),m,C("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ne(k.value)}},null)]):C("div",{ref:v,class:Le(["v-virtual-scroll",t.class]),onScrollPassive:r,onScrollend:w,style:Ee([o.value,t.style])},[C("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:ne(R.value),paddingBottom:ne(k.value)}},[m])])}),{calculateVisibleItems:f,scrollToIndex:O}}});function vt(t,d){const n=K(!1);let c;function o(a){cancelAnimationFrame(c),n.value=!0,c=requestAnimationFrame(()=>{c=requestAnimationFrame(()=>{n.value=!1})})}async function f(){await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>requestAnimationFrame(a)),await new Promise(a=>{if(n.value){const r=$(n,()=>{r(),a()})}else a()})}async function v(a){var s,O;if(a.key==="Tab"&&((s=d.value)==null||s.focus()),!["PageDown","PageUp","Home","End"].includes(a.key))return;const r=(O=t.value)==null?void 0:O.$el;if(!r)return;(a.key==="Home"||a.key==="End")&&r.scrollTo({top:a.key==="Home"?0:r.scrollHeight,behavior:"smooth"}),await f();const w=r.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(a.key==="PageDown"||a.key==="Home"){const R=r.getBoundingClientRect().top;for(const k of w)if(k.getBoundingClientRect().top>=R){k.focus();break}}else{const R=r.getBoundingClientRect().bottom;for(const k of[...w].reverse())if(k.getBoundingClientRect().bottom<=R){k.focus();break}}}return{onScrollPassive:o,onKeydown:v}}const mt=Z({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Xe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...We({itemChildren:!1})},"Select"),ht=Z({...mt(),...qe(je({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ue({transition:{component:$e}})},"VSelect"),bt=re()({name:"VSelect",props:ht(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,d){let{slots:n}=d;const{t:c}=Me(),o=W(),f=W(),v=W(),{items:a,transformIn:r,transformOut:w}=He(t),s=ve(t,"modelValue",[],e=>r(e===null?[null]:ze(e)),e=>{const l=w(e);return t.multiple?l:l[0]??null}),O=L(()=>typeof t.counterValue=="function"?t.counterValue(s.value):typeof t.counterValue=="number"?t.counterValue:s.value.length),R=Ke(t),k=L(()=>s.value.map(e=>e.value)),A=K(!1);let m="",g=-1,S;const y=L(()=>t.hideSelected?a.value.filter(e=>!s.value.some(l=>(t.valueComparator||se)(l,e))):a.value),M=L(()=>t.hideNoData&&!y.value.length||R.isReadonly.value||R.isDisabled.value),H=ve(t,"menu"),h=L({get:()=>H.value,set:e=>{var l;H.value&&!e&&((l=f.value)!=null&&l.Î¨openChildren.size)||e&&M.value||(H.value=e)}}),J=Pe(()=>h.value?t.closeText:t.openText),F=L(()=>{var e;return{...t.menuProps,activatorProps:{...((e=t.menuProps)==null?void 0:e.activatorProps)||{},"aria-haspopup":"listbox"}}}),_=W(),j=vt(_,o);function N(e){t.openOnClear&&(h.value=!0)}function X(){M.value||(h.value=!h.value)}function Y(e){he(e)&&ee(e)}function ee(e){var P,z,V;if(!e.key||R.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(e.key)&&e.preventDefault(),["Enter","ArrowDown"," "].includes(e.key)&&(h.value=!0),["Escape","Tab"].includes(e.key)&&(h.value=!1),e.key==="Home"?(P=_.value)==null||P.focus("first"):e.key==="End"&&((z=_.value)==null||z.focus("last"));const l=1e3;if(!he(e))return;const i=performance.now();i-S>l&&(m="",g=-1),m+=e.key.toLowerCase(),S=i;const b=y.value;function B(){let p=u();return p||m.at(-1)===m.at(-2)&&(m=m.slice(0,-1),p=u(),p)||(g=-1,p=u(),p)?p:(m=e.key.toLowerCase(),u())}function u(){for(let p=g+1;p<b.length;p++){const G=b[p];if(G.title.toLowerCase().startsWith(m))return[G,p]}}const T=B();if(!T)return;const[I,D]=T;g=D,(V=_.value)==null||V.focus(D),t.multiple||(s.value=[I])}function U(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e.props.disabled)if(t.multiple){const i=s.value.findIndex(B=>(t.valueComparator||se)(B.value,e.value)),b=l??!~i;if(~i){const B=b?[...s.value,e]:[...s.value];B.splice(i,1),s.value=B}else b&&(s.value=[...s.value,e])}else{const i=l!==!1;s.value=i?[e]:[],ke(()=>{h.value=!1})}}function te(e){var l;(l=_.value)!=null&&l.$el.contains(e.relatedTarget)||(h.value=!1)}function E(){var e;t.eager&&((e=v.value)==null||e.calculateVisibleItems())}function ae(){var e;A.value&&((e=o.value)==null||e.focus())}function le(e){A.value=!0}function oe(e){if(e==null)s.value=[];else if(pe(o.value,":autofill")||pe(o.value,":-webkit-autofill")){const l=a.value.find(i=>i.title===e);l&&U(l)}else o.value&&(o.value.value="")}return $(h,()=>{if(!t.hideSelected&&h.value&&s.value.length){const e=y.value.findIndex(l=>s.value.some(i=>(t.valueComparator||se)(i.value,l.value)));Se&&window.requestAnimationFrame(()=>{var l;e>=0&&((l=v.value)==null||l.scrollToIndex(e))})}}),$(()=>t.items,(e,l)=>{h.value||A.value&&!l.length&&e.length&&(h.value=!0)}),ce(()=>{const e=!!(t.chips||n.chip),l=!!(!t.hideNoData||y.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),i=s.value.length>0,b=me.filterProps(t),B=i||!A.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return x(me,q({ref:o},b,{modelValue:s.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":oe,focused:A.value,"onUpdate:focused":u=>A.value=u,validationValue:s.externalValue,counterValue:O.value,dirty:i,class:["v-select",{"v-select--active-menu":h.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length,"v-select--selection-slot":!!n.selection},t.class],style:t.style,inputmode:"none",placeholder:B,"onClick:clear":N,"onMousedown:control":X,onBlur:te,onKeydown:ee,"aria-label":c(J.value),title:c(J.value)}),{...n,default:()=>C(Q,null,[x(Ye,q({ref:f,modelValue:h.value,"onUpdate:modelValue":u=>h.value=u,activator:"parent",contentClass:"v-select__content",disabled:M.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterEnter:E,onAfterLeave:ae},F.value),{default:()=>[l&&x(Ge,q({ref:_,selected:k.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:Y,onFocusin:le,tabindex:"-1","aria-live":"polite","aria-label":`${t.label}-list`,color:t.itemColor??t.color},j,t.listProps),{default:()=>{var u,T,I;return[(u=n["prepend-item"])==null?void 0:u.call(n),!y.value.length&&!t.hideNoData&&(((T=n["no-data"])==null?void 0:T.call(n))??x(ye,{key:"no-data",title:c(t.noDataText)},null)),x(ft,{ref:v,renderless:!0,items:y.value,itemKey:"value"},{default:D=>{var de;let{item:P,index:z,itemRef:V}=D;const p=Qe(P.props),G=q(P.props,{ref:V,key:P.value,onClick:()=>U(P,null)});return((de=n.item)==null?void 0:de.call(n,{item:P,index:z,props:G}))??x(ye,q(G,{role:"option"}),{prepend:Te=>{let{isSelected:Ie}=Te;return C(Q,null,[t.multiple&&!t.hideSelected?x(lt,{key:P.value,modelValue:Ie,ripple:!1,tabindex:"-1"},null):void 0,p.prependAvatar&&x(Ze,{image:p.prependAvatar},null),p.prependIcon&&x(ge,{icon:p.prependIcon},null)])}})}}),(I=n["append-item"])==null?void 0:I.call(n)]}})]}),s.value.map((u,T)=>{function I(V){V.stopPropagation(),V.preventDefault(),U(u,!1)}const D={"onClick:close":I,onKeydown(V){V.key!=="Enter"&&V.key!==" "||(V.preventDefault(),V.stopPropagation(),I(V))},onMousedown(V){V.preventDefault(),V.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},P=e?!!n.chip:!!n.selection,z=P?Je(e?n.chip({item:u,index:T,props:D}):n.selection({item:u,index:T})):void 0;if(!(P&&!z))return C("div",{key:u.value,class:"v-select__selection"},[e?n.chip?x(et,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:u.title}}},{default:()=>[z]}):x(nt,q({key:"chip",closable:t.closableChips,size:"small",text:u.title,disabled:u.props.disabled},D),null):z??C("span",{class:"v-select__selection-text"},[u.title,t.multiple&&T<s.value.length-1&&C("span",{class:"v-select__selection-comma"},[tt(",")])])])})]),"append-inner":function(){var D,P;for(var u=arguments.length,T=new Array(u),I=0;I<u;I++)T[I]=arguments[I];return C(Q,null,[(D=n["append-inner"])==null?void 0:D.call(n,...T),t.menuIcon?x(ge,{class:"v-select__menu-icon",color:(P=o.value)==null?void 0:P.fieldIconColor,icon:t.menuIcon},null):void 0])}})}),Ne({isFocused:A,menu:h,select:U},o)}});export{bt as V};
