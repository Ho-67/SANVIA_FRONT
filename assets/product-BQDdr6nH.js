import{X as D,Y as I,aj as R,ak as N,al as q,am as F,an as $,h,ao as j,a4 as z,b as T,a7 as A,ap as G,aq as M,ar as O,n as U,m as f,o as i,s as n,v as r,as as X,c as y,at as P,D as E,E as S,F as b,e as V,au as Y,y as H,B as J,av as K,aw as Q,ax as W,g as Z,w as ee,G as te,V as w,x as p,a as ae,t as re}from"./index-CoNJkl2v.js";import{P as ne}from"./productCard-DVqrmorG.js";import{V as oe}from"./VAlert-Cx9JWKog.js";import{V as se}from"./VPagination-C5TOup5m.js";import"./VChip-D31goacF.js";const le={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function ie(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return T("div",{class:U(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[a])}function L(e){const[a,t]=e.split("@");return Array.from({length:t}).map(()=>x(a))}function x(e){let a=[];if(!e)return a;const t=le[e];if(e!==t){if(e.includes(","))return B(e);if(e.includes("@"))return L(e);t.includes(",")?a=B(t):t.includes("@")?a=L(t):t&&a.push(x(t))}return[ie(e,a)]}function B(e){return e.replace(/\s/g,"").split(",").map(x)}const de=I({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...O(),...M(),...G()},"VSkeletonLoader"),ue=D()({name:"VSkeletonLoader",props:de(),setup(e,a){let{slots:t}=a;const{backgroundColorClasses:d,backgroundColorStyles:u}=R(()=>e.color),{dimensionStyles:c}=N(e),{elevationClasses:m}=q(e),{themeClasses:v}=F(e),{t:_}=$(),s=h(()=>x(j(e.type).join(",")));return z(()=>{var g;const o=!t.default||e.loading,l=e.boilerplate||!o?{}:{ariaLive:"polite",ariaLabel:_(e.loadingText),role:"alert"};return T("div",A({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},v.value,d.value,m.value],style:[u.value,o?c.value:{}]},l),[o?s.value:(g=t.default)==null?void 0:g.call(t)])}),{}}}),ce={__name:"rankingSidebar",setup(e){const a=[{text:"商品1",icon:"mdi-medal"},{text:"商品2",icon:"mdi-medal"},{text:"商品3",icon:"mdi-medal"}];return(t,d)=>(i(),f(J,{class:"w-100 text-text"},{default:n(()=>[r(X,null,{default:n(()=>[r(P,{class:"text-h6 d-flex align-center text-secondary"},{default:n(()=>[r(S,{class:"ml-4 mr-6",color:"secondary",icon:"iconify:ix:trophy-filled",size:"24"}),d[0]||(d[0]=E(" 打賞商品排名 "))]),_:1,__:[0]}),(i(),y(b,null,V(a,(u,c)=>r(Y,{key:c,color:"primary",rounded:"shaped",value:u},{prepend:n(()=>[r(S,{color:"onSecondary",icon:u.icon},null,8,["icon"])]),default:n(()=>[r(P,{textContent:H(u.text)},null,8,["textContent"])]),_:2},1032,["value"])),64))]),_:1})]),_:1}))}},k=9,_e={__name:"product",setup(e){const a=W(),t=K(),{products:d,isLoading:u}=Q(t),c=h(()=>{const{sortBy:s,sortOrder:o}=a.query;if(!s)return d.value;const l=parseInt(o)||-1;return[...d.value].sort((g,C)=>s==="price"?(g.price-C.price)*l:s==="createdAt"?(new Date(g.createdAt)-new Date(C.createdAt))*l:0)}),m=Z(1),v=h(()=>Math.ceil(c.value.length/k)),_=h(()=>{const s=(m.value-1)*k,o=s+k;return c.value.slice(s,o)});return ee(()=>a.query,s=>{t.fetchProducts(s),m.value=1},{immediate:!0,deep:!0}),(s,o)=>(i(),f(te,{class:"ma-0 text-text",fluid:""},{default:n(()=>[r(w,{class:"mr-0"},{default:n(()=>[r(p,{cols:"12",md:"9"},{default:n(()=>[r(w,null,{default:n(()=>[re(u)?(i(),y(b,{key:0},V(9,l=>r(p,{key:l,cols:"6",lg:"4",md:"6"},{default:n(()=>[r(ue,{type:"card"})]),_:2},1024)),64)):_.value.length>0?(i(!0),y(b,{key:1},V(_.value,l=>(i(),f(p,{key:l._id,cols:"6",lg:"4",md:"6"},{default:n(()=>[r(ne,A({ref_for:!0},l),null,16)]),_:2},1024))),128)):(i(),f(p,{key:2,cols:"12"},{default:n(()=>[r(oe,{class:"ma-4",type:"info",variant:"tonal"},{default:n(()=>o[1]||(o[1]=[E(" 找不到符合條件的商品 ")])),_:1,__:[1]})]),_:1})),v.value>1?(i(),f(p,{key:3,cols:"12"},{default:n(()=>[r(se,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=l=>m.value=l),circle:"",length:v.value,"total-visible":5},null,8,["modelValue","length"])]),_:1})):ae("",!0)]),_:1})]),_:1}),r(p,{cols:"12",md:"3"},{default:n(()=>[r(ce)]),_:1})]),_:1})]),_:1}))}};export{_e as default};
