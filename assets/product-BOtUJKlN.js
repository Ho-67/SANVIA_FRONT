import{a1 as E,a2 as I,ao as N,ap as R,aq as q,ar as z,as as F,h,at as M,a9 as $,b as A,ac as T,au as G,av as j,aw as H,n as O,p as f,o as i,t as o,v as r,ax as U,c as b,ay as P,G as D,H as S,F as k,e as V,az as J,D as K,C as Q,aA as W,aB as X,aC as Y,g as Z,w as ee,M as te,V as w,y as p,a as ae,x as re}from"./index-CY7g7pVQ.js";import{P as oe}from"./productCard-C_mQ_hAg.js";import{V as ne}from"./VAlert-CEnq7R-g.js";import{V as se}from"./VPagination-CHMbUiB9.js";import"./VChip-CKMLgH3V.js";const le={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function ie(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return A("div",{class:O(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[a])}function L(e){const[a,t]=e.split("@");return Array.from({length:t}).map(()=>x(a))}function x(e){let a=[];if(!e)return a;const t=le[e];if(e!==t){if(e.includes(","))return B(e);if(e.includes("@"))return L(e);t.includes(",")?a=B(t):t.includes("@")?a=L(t):t&&a.push(x(t))}return[ie(e,a)]}function B(e){return e.replace(/\s/g,"").split(",").map(x)}const de=I({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...H(),...j(),...G()},"VSkeletonLoader"),ue=E()({name:"VSkeletonLoader",props:de(),setup(e,a){let{slots:t}=a;const{backgroundColorClasses:d,backgroundColorStyles:u}=N(()=>e.color),{dimensionStyles:c}=R(e),{elevationClasses:m}=q(e),{themeClasses:v}=z(e),{t:_}=F(),s=h(()=>x(M(e.type).join(",")));return $(()=>{var g;const n=!t.default||e.loading,l=e.boilerplate||!n?{}:{ariaLive:"polite",ariaLabel:_(e.loadingText),role:"alert"};return A("div",T({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},v.value,d.value,m.value],style:[u.value,n?c.value:{}]},l),[n?s.value:(g=t.default)==null?void 0:g.call(t)])}),{}}}),ce={__name:"rankingSidebar",setup(e){const a=[{text:"商品1",icon:"mdi-medal"},{text:"商品2",icon:"mdi-medal"},{text:"商品3",icon:"mdi-medal"}];return(t,d)=>(i(),f(Q,{class:"w-100 text-text"},{default:o(()=>[r(U,null,{default:o(()=>[r(P,{class:"text-h6 d-flex align-center text-secondary"},{default:o(()=>[r(S,{class:"ml-4 mr-6",color:"secondary",icon:"iconify:ix:trophy-filled",size:"24"}),d[0]||(d[0]=D(" 打賞商品排名 "))]),_:1,__:[0]}),(i(),b(k,null,V(a,(u,c)=>r(J,{key:c,color:"primary",rounded:"shaped",value:u},{prepend:o(()=>[r(S,{color:"onSecondary",icon:u.icon},null,8,["icon"])]),default:o(()=>[r(P,{textContent:K(u.text)},null,8,["textContent"])]),_:2},1032,["value"])),64))]),_:1})]),_:1}))}},y=9,_e={__name:"product",setup(e){const a=Y(),t=W(),{products:d,isLoading:u}=X(t),c=h(()=>{const{sortBy:s,sortOrder:n}=a.query;if(!s)return d.value;const l=Number.parseInt(n)||-1;return[...d.value].sort((g,C)=>s==="price"?(g.price-C.price)*l:s==="createdAt"?(new Date(g.createdAt)-new Date(C.createdAt))*l:0)}),m=Z(1),v=h(()=>Math.ceil(c.value.length/y)),_=h(()=>{const s=(m.value-1)*y,n=s+y;return c.value.slice(s,n)});return ee(()=>a.query,s=>{t.fetchProducts(s),m.value=1},{immediate:!0,deep:!0}),(s,n)=>(i(),f(te,{class:"ma-0 text-text",fluid:""},{default:o(()=>[r(w,{class:"mr-0"},{default:o(()=>[r(p,{cols:"12",md:"9"},{default:o(()=>[r(w,{class:"pa-6"},{default:o(()=>[re(u)?(i(),b(k,{key:0},V(9,l=>r(p,{key:l,cols:"6",lg:"4",md:"6"},{default:o(()=>[r(ue,{type:"card"})]),_:2},1024)),64)):_.value.length>0?(i(!0),b(k,{key:1},V(_.value,l=>(i(),f(p,{key:l._id,cols:"6",lg:"4",md:"6"},{default:o(()=>[r(oe,T({ref_for:!0},l),null,16)]),_:2},1024))),128)):(i(),f(p,{key:2,cols:"12"},{default:o(()=>[r(ne,{class:"ma-4",type:"info",variant:"tonal"},{default:o(()=>n[1]||(n[1]=[D(" 找不到符合條件的商品 ")])),_:1,__:[1]})]),_:1})),v.value>1?(i(),f(p,{key:3,cols:"12"},{default:o(()=>[r(se,{modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=l=>m.value=l),circle:"",length:v.value,"total-visible":5},null,8,["modelValue","length"])]),_:1})):ae("",!0)]),_:1})]),_:1}),r(p,{cols:"12",md:"3"},{default:o(()=>[r(ce)]),_:1})]),_:1})]),_:1}))}};export{_e as default};
